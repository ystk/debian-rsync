diff -urN rsync-3.1.1/zlib/inflate.c rsync-3.1.1.new/zlib/inflate.c
--- rsync-3.1.1/zlib/inflate.c	2013-06-10 07:27:33.000000000 +0200
+++ rsync-3.1.1.new/zlib/inflate.c	2019-03-20 16:14:10.325948452 +0100
@@ -1525,9 +1525,10 @@
 {
     struct inflate_state FAR *state;
 
-    if (strm == Z_NULL || strm->state == Z_NULL) return -1L << 16;
+    if (strm == Z_NULL || strm->state == Z_NULL)
+        return -(1L << 16);
     state = (struct inflate_state FAR *)strm->state;
-    return ((long)(state->back) << 16) +
+    return (long)(((unsigned long)((long)state->back)) << 16) +
         (state->mode == COPY ? state->length :
             (state->mode == MATCH ? state->was - state->length : 0));
 }
